{"id":"thrum-76v","title":"ComposeBar Redesign + MentionAutocomplete — Two-row layout, agent names","description":"Re-implement: (C1) MentionAutocomplete show agent display names as labels, (C2) ComposeBar two-row Slack-style layout, (C3) MentionAutocomplete test updates, (D4) MentionAutocomplete search by agent_id+display+role with agents-first ordering. See dev-docs/failure-recovery/RECOVERY_PLAN.md Groups C + D4.","status":"closed","priority":1,"issue_type":"epic","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:19:44.201546-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T10:35:34.779558-08:00","closed_at":"2026-02-24T10:35:34.779558-08:00","close_reason":"ComposeBar redesign complete","dependencies":[{"issue_id":"thrum-76v","depends_on_id":"thrum-kh3","type":"blocks","created_at":"2026-02-24T08:20:03.983308-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-76v.1","title":"MentionAutocomplete: search by agent_id+display+role, agents first","description":"## Files\n- Modify: ui/packages/web-app/src/components/inbox/MentionAutocomplete.tsx\n\n## Steps\n1. Separate agent and group suggestion building into agentSuggestions and groupSuggestions arrays\n2. Agent filter: match against agent.role, agent.agent_id, AND agent.display (all lowercased)\n3. Agent label: agent.display || agent.agent_id.replace(/^(agent|user):/, '')\n4. Agent sublabel: agent.role\n5. Group filter: unchanged (match group.name)\n6. Merge: filteredSuggestions = [...agentSuggestions, ...groupSuggestions] (agents first)\n\n## Acceptance Criteria\n- [ ] Typing @coordinator_ shows coordinator_main as first suggestion\n- [ ] Agents appear before groups in dropdown\n- [ ] Build passes","status":"closed","priority":1,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:21:36.366783-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T10:30:46.847696-08:00","closed_at":"2026-02-24T10:30:46.847696-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-76v.1","depends_on_id":"thrum-76v","type":"parent-child","created_at":"2026-02-24T08:21:36.367513-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-76v.2","title":"ComposeBar: Two-row Slack-style layout with removable chips","description":"## Files\n- Modify: ui/packages/web-app/src/components/inbox/ComposeBar.tsx\n\n## Steps\n1. Add removeChip(chip) function that filters selectedRecipients\n2. Remove Users import from lucide-react (keep Loader2, X)\n3. Restructure form from single-row to two-row:\n   - Row 1 (addressing): To: label + allMentions chips (union of selectedRecipients + mentions) + '+ Add' button + recipient dropdown. Hidden when groupScope set.\n   - Row 2 (message): flex-1 MentionAutocomplete + Send button inline\n4. Chips from selectedRecipients get X button for removal via removeChip\n5. Add pt-1 to isImpersonating warning div\n\n## Acceptance Criteria\n- [ ] Addressing row above textarea\n- [ ] Full-width textarea on its own row\n- [ ] Chips show combined recipients\n- [ ] Tests pass","status":"closed","priority":1,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:21:41.185478-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T10:34:58.486827-08:00","closed_at":"2026-02-24T10:34:58.486827-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-76v.2","depends_on_id":"thrum-76v","type":"parent-child","created_at":"2026-02-24T08:21:41.186173-08:00","created_by":"Leon Letto"},{"issue_id":"thrum-76v.2","depends_on_id":"thrum-76v.1","type":"blocks","created_at":"2026-02-24T08:21:57.472947-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-76v.3","title":"Update MentionAutocomplete tests for agent display names","description":"## Files\n- Modify: ui/packages/web-app/src/components/inbox/__tests__/MentionAutocomplete.test.tsx\n\n## Steps\n1. Update mock display values: 'Assistant Bot' → 'assistant_main', 'Research Agent' → 'researcher_main', 'Testing Agent' → 'tester_main'\n2. Update ALL label assertions: @assistant → @assistant_main, @researcher → @researcher_main, @tester → @tester_main\n3. Update mention extraction assertions: ['assistant'] → ['assistant_main'], ['assistant','researcher'] → ['assistant_main','researcher_main'], etc.\n4. Update typed text in tests: 'Hello @assistant and @researcher' → 'Hello @assistant_main and @researcher_main', etc.\n\n## Acceptance Criteria\n- [ ] All MentionAutocomplete tests pass\n- [ ] All 473+ tests pass: cd ui \u0026\u0026 pnpm test -- -- --run","status":"closed","priority":1,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:21:48.690385-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T10:34:58.488633-08:00","closed_at":"2026-02-24T10:34:58.488633-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-76v.3","depends_on_id":"thrum-76v","type":"parent-child","created_at":"2026-02-24T08:21:48.691152-08:00","created_by":"Leon Letto"},{"issue_id":"thrum-76v.3","depends_on_id":"thrum-76v.1","type":"blocks","created_at":"2026-02-24T08:22:00.660733-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-79d","title":"Fix user.identify returning Thrum instead of git username","description":"safecmd.Git injects -c user.name=Thrum on every git command, which overrides git config --get user.name in the user.identify RPC. Fix: gitConfigValue() uses exec.Command directly to bypass the override.","status":"closed","priority":1,"issue_type":"bug","owner":"leon.letto@gmail.com","created_at":"2026-02-25T08:11:19.580622-08:00","created_by":"Leon Letto","updated_at":"2026-02-25T08:11:25.220343-08:00","closed_at":"2026-02-25T08:11:25.220343-08:00","close_reason":"Fixed in f99260b: gitConfigValue() now uses exec.Command directly instead of safecmd.Git to read real git config user.name"}
{"id":"thrum-7fg","title":"CSS Variable Migration — Replace hardcoded cyan with CSS var tokens","description":"Replace all hardcoded cyan-* Tailwind classes and #0d1120 hex values with CSS variable tokens across 17+ UI files. Add 4 new CSS variables. Fix dialog/panel backgrounds to use --panel-bg-start. Fix MessageBubble hardcoded hex colors for light mode. Do NOT modify tailwind.config.js. See dev-docs/failure-recovery/RECOVERY_PLAN.md Groups A + D5 + D6.","status":"closed","priority":1,"issue_type":"epic","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:19:24.785184-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T10:35:34.523555-08:00","closed_at":"2026-02-24T10:35:34.523555-08:00","close_reason":"CSS variable migration complete"}
{"id":"thrum-7fg.1","title":"Add 4 new CSS variables to index.css for both :root and .dark","description":"## Files\n- Modify: ui/packages/web-app/src/index.css\n\n## Steps\n1. Add to :root section: --accent-glow-soft: transparent; --accent-glow-hover: transparent; --mention-highlight: rgba(8, 145, 178, 0.1); --mention-highlight-self: rgba(8, 145, 178, 0.2);\n2. Add to .dark section: --accent-glow-soft: rgba(56, 189, 248, 0.3); --accent-glow-hover: rgba(56, 189, 248, 0.6); --mention-highlight: rgba(56, 189, 248, 0.15); --mention-highlight-self: rgba(56, 189, 248, 0.3);\n\n## Acceptance Criteria\n- [ ] 4 new variables in :root with light values\n- [ ] 4 new variables in .dark with dark values\n- [ ] Build passes: cd ui \u0026\u0026 pnpm build","status":"closed","priority":1,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:21:37.690639-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T09:04:13.622347-08:00","closed_at":"2026-02-24T09:04:13.622347-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-7fg.1","depends_on_id":"thrum-7fg","type":"parent-child","created_at":"2026-02-24T08:21:37.691357-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-7fg.2","title":"Replace cyan classes in UI primitives (button, card, dialog, badge, ScopeBadge)","description":"## Files\n- Modify: ui/packages/web-app/src/components/ui/button.tsx (5 cyan + 2 shadow rgbas)\n- Modify: ui/packages/web-app/src/components/ui/card.tsx (1 cyan + 1 shadow + slate gradient)\n- Modify: ui/packages/web-app/src/components/ui/dialog.tsx (1 cyan + 1 shadow + gradient → --panel-bg-start/--panel-bg-end)\n- Modify: ui/packages/web-app/src/components/ui/badge.tsx (3 cyan patterns)\n- Modify: ui/packages/web-app/src/components/ui/ScopeBadge.tsx (3 cyan classes)\n\n## Steps\nApply the canonical mapping from RECOVERY_PLAN.md section A2. Key mappings:\n- text-cyan-400/500 → text-[var(--accent-color)]\n- border-cyan-500/10-30 → border-[var(--accent-border)]\n- ring-cyan-500 → ring-[var(--accent-color)]\n- from-cyan-600 → from-[var(--accent-hover)]\n- to-cyan-500 → to-[var(--accent-color)]\n- from-slate-900 to-slate-800 → from-[var(--panel-bg-start)] to-[var(--panel-bg-end)]\n- shadow rgba(56,189,248,...) → shadow-[0_0_15px_var(--accent-glow-soft)]\n\nIMPORTANT: dialog.tsx gradient must use --panel-bg-start/--panel-bg-end (NOT --app-bg-secondary)\n\n## Acceptance Criteria\n- [ ] 0 cyan- references in these 5 files\n- [ ] Build passes","status":"closed","priority":1,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:21:52.814836-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T09:09:35.248415-08:00","closed_at":"2026-02-24T09:09:35.248415-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-7fg.2","depends_on_id":"thrum-7fg","type":"parent-child","created_at":"2026-02-24T08:21:52.815547-08:00","created_by":"Leon Letto"},{"issue_id":"thrum-7fg.2","depends_on_id":"thrum-7fg.1","type":"blocks","created_at":"2026-02-24T08:22:21.11485-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-7fg.3","title":"Replace cyan classes in feature components (ComposeBar, GroupChannelView, MessageBubble, 5 others)","description":"## Files\n- Modify: ui/packages/web-app/src/components/inbox/ComposeBar.tsx (19 cyan + 1 hex)\n- Modify: ui/packages/web-app/src/components/groups/GroupChannelView.tsx (38 cyan + 2 hex — largest)\n- Modify: ui/packages/web-app/src/components/inbox/MessageBubble.tsx (3 inline rgba + hardcoded hex colors for light mode D5)\n- Modify: ui/packages/web-app/src/components/status/HealthBar.tsx (2 cyan)\n- Modify: ui/packages/web-app/src/components/agents/AgentCard.tsx (1 cyan)\n- Modify: ui/packages/web-app/src/components/Sidebar.tsx (5 cyan)\n- Modify: ui/packages/web-app/src/components/coordination/WhoHasView.tsx (3 cyan)\n- Modify: ui/packages/web-app/src/components/subscriptions/SubscriptionPanel.tsx (2 cyan)\n\n## Steps\nApply canonical mapping from RECOVERY_PLAN.md A2. Key notes:\n- bg-[#0d1120] → bg-[var(--panel-bg-start)] (NOT --app-bg-secondary — causes transparent panels)\n- MessageBubble: also fix hardcoded hex text-[#e2e8f0], text-[#cbd5e1], text-[#64748b] → use CSS vars (text-[var(--text-secondary)] etc.)\n- MessageBubble: hover:bg-[rgba(56,189,248,0.04)] → hover:bg-[var(--accent-subtle-bg)]\n- MessageBubble inline mention rgba styles → var(--mention-highlight), var(--mention-highlight-self)\n- MentionAutocomplete.tsx: bg-popover → bg-[var(--panel-bg-start)] on dropdown container\n- Leave yellow/amber, red, purple, gray untouched\n\n## Acceptance Criteria\n- [ ] 0 cyan- references in all component .tsx files\n- [ ] 0 #0d1120 references\n- [ ] Build passes","status":"closed","priority":1,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:22:00.156416-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T09:09:35.249778-08:00","closed_at":"2026-02-24T09:09:35.249778-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-7fg.3","depends_on_id":"thrum-7fg","type":"parent-child","created_at":"2026-02-24T08:22:00.157141-08:00","created_by":"Leon Letto"},{"issue_id":"thrum-7fg.3","depends_on_id":"thrum-7fg.1","type":"blocks","created_at":"2026-02-24T08:22:21.200678-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-7fg.4","title":"Update test files for CSS variable migration","description":"## Files\n- Modify: ui/packages/web-app/src/components/status/__tests__/HealthBar.test.tsx\n- Modify: ui/packages/web-app/src/components/agents/__tests__/AgentCard.test.tsx\n- Modify: ui/packages/web-app/src/components/ui/__tests__/ScopeBadge.test.tsx\n- Modify: ui/packages/web-app/src/components/inbox/__tests__/MessageBubble.test.tsx (hover class assertion)\n\n## Steps\nUpdate any assertions that check for cyan-* classes or rgba values to use the new CSS variable equivalents:\n- hover:bg-[rgba(56,189,248,0.04)] → hover:bg-[var(--accent-subtle-bg)]\n- ring-cyan-500 → ring-[var(--accent-color)]\n- text-cyan-400 → text-[var(--accent-color)]\n- border-cyan-500/20 → border-[var(--accent-border)]\n\n## Acceptance Criteria\n- [ ] All 473+ tests pass: cd ui \u0026\u0026 pnpm test -- -- --run\n- [ ] Build passes: cd ui \u0026\u0026 pnpm build\n- [ ] grep -r cyan- ui/packages/web-app/src/components/ --include=*.tsx returns 0 results","status":"closed","priority":1,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:22:06.740254-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T09:10:39.012145-08:00","closed_at":"2026-02-24T09:10:39.012145-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-7fg.4","depends_on_id":"thrum-7fg","type":"parent-child","created_at":"2026-02-24T08:22:06.741299-08:00","created_by":"Leon Letto"},{"issue_id":"thrum-7fg.4","depends_on_id":"thrum-7fg.2","type":"blocks","created_at":"2026-02-24T08:22:21.284206-08:00","created_by":"Leon Letto"},{"issue_id":"thrum-7fg.4","depends_on_id":"thrum-7fg.3","type":"blocks","created_at":"2026-02-24T08:22:21.367156-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-8nq","title":"Fix thrum wait orphaned on daemon restart","status":"closed","priority":1,"issue_type":"bug","owner":"leon.letto@gmail.com","created_at":"2026-02-25T07:58:49.719348-08:00","created_by":"Leon Letto","updated_at":"2026-02-25T07:59:00.722947-08:00","closed_at":"2026-02-25T07:59:00.722947-08:00","close_reason":"Fixed: Wait now auto-reconnects to daemon with 60s retry. Also fixed user.identify returning Thrum instead of git username (safecmd.Git override)."}
{"id":"thrum-9b7","title":"Agent View Redesign + Git Username — Minimal header, gear slide-out","description":"New work: (E) Wire user.identify RPC into AppShell auto-registration to show git config user.name instead of 'thrum'. (F) Redesign AgentContextPanel from large bordered card to thin header bar + gear icon slide-out panel matching GroupChannelView pattern. See dev-docs/failure-recovery/RECOVERY_PLAN.md Groups E + F.","status":"closed","priority":2,"issue_type":"epic","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:19:55.103254-08:00","created_by":"Leon Letto","updated_at":"2026-02-25T08:55:58.454749-08:00","closed_at":"2026-02-25T08:55:58.454749-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-9b7","depends_on_id":"thrum-7fg","type":"blocks","created_at":"2026-02-24T08:20:04.065068-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-9b7.1","title":"Wire user.identify RPC into AppShell for git username display","description":"## Files\n- Modify: ui/packages/web-app/src/components/AppShell.tsx\n\n## Steps\n1. In AppShell auto-registration flow, call user.identify RPC first to get git config user.name\n2. Pass the real name to user.register instead of hardcoded 'thrum'\n3. Fallback to 'thrum' if user.identify fails\n\n## Acceptance Criteria\n- [ ] UI header shows git config user.name instead of 'Thrum'\n- [ ] Fallback works if git config not set","status":"closed","priority":2,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:22:07.483905-08:00","created_by":"Leon Letto","updated_at":"2026-02-25T08:55:58.446419-08:00","closed_at":"2026-02-25T08:55:58.446419-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-9b7.1","depends_on_id":"thrum-9b7","type":"parent-child","created_at":"2026-02-24T08:22:07.484616-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-9b7.2","title":"Redesign AgentContextPanel: thin header bar + gear slide-out","description":"## Files\n- Modify: ui/packages/web-app/src/components/agents/AgentContextPanel.tsx\n- Test: ui/packages/web-app/src/components/agents/__tests__/AgentContextPanel.test.tsx\n\n## Steps\n1. Replace the large bordered card with a thin header bar (~40px height):\n   - Status dot (online/offline) + agent display name (bold) + role badge + intent text (truncated) + gear icon button\n2. Add gear icon click → slide-out panel (absolute right, w-72, same pattern as GroupChannelView settings):\n   - Full agent details: AGENT ID, ROLE, INTENT, TASK, BRANCH, UNCOMMITTED (with file list), CHANGED, HEARTBEAT\n   - Delete Agent button at bottom behind border-top divider\n   - Close X button at top-right\n3. Move AgentDeleteDialog trigger inside the slide-out panel\n4. Update tests to match new structure\n\nReference: ui/packages/web-app/src/components/groups/GroupChannelView.tsx lines 170-400 for the slide-out pattern\n\n## Acceptance Criteria\n- [ ] Agent header is a single thin bar (not a large card)\n- [ ] Gear icon opens slide-out panel with full details\n- [ ] Delete Agent is inside slide-out, not inline\n- [ ] Messages get maximum vertical space\n- [ ] Tests pass","status":"closed","priority":2,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:22:18.806093-08:00","created_by":"Leon Letto","updated_at":"2026-02-25T08:55:58.448921-08:00","closed_at":"2026-02-25T08:55:58.448921-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-9b7.2","depends_on_id":"thrum-9b7","type":"parent-child","created_at":"2026-02-24T08:22:18.806985-08:00","created_by":"Leon Letto"},{"issue_id":"thrum-9b7.2","depends_on_id":"thrum-9b7.1","type":"blocks","created_at":"2026-02-24T08:22:21.648045-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-9b7.3","title":"Fix phantom 'Thrum' agent in sidebar","description":"The UI's auto-registration flow in AppShell.tsx registers a 'thrum' user agent via user.register RPC. This agent then appears in the sidebar agent list as 'Thrum' alongside real agents. Either: (a) the UI user should not appear in the agent list, or (b) the agent list should filter out user-type agents. Investigate how AppShell registers and whether the agent list RPC can exclude UI users.","status":"closed","priority":1,"issue_type":"bug","owner":"leon.letto@gmail.com","created_at":"2026-02-24T16:15:37.974842-08:00","created_by":"Leon Letto","updated_at":"2026-02-25T08:55:58.450973-08:00","closed_at":"2026-02-25T08:55:58.450973-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-9b7.3","depends_on_id":"thrum-9b7","type":"parent-child","created_at":"2026-02-24T16:15:37.975637-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-9b7.4","title":"Fix My Inbox empty — UI identity mismatch drops all messages","description":"My Inbox view shows 'No messages' even though messages exist. Root cause: the UI registers as 'thrum' (hardcoded) via user.register, but actual messages are addressed to real agent names like @coordinator_main. The inbox filter matches against the UI's registered identity ('thrum') and finds nothing. Fix: wire user.identify RPC to get git username, then use that as the UI identity so inbox filtering works. This is closely related to thrum-9b7.1 (git username display) — the same user.identify call fixes both the display name and the inbox filter.","status":"closed","priority":1,"issue_type":"bug","owner":"leon.letto@gmail.com","created_at":"2026-02-24T16:15:40.112388-08:00","created_by":"Leon Letto","updated_at":"2026-02-25T08:55:58.452777-08:00","closed_at":"2026-02-25T08:55:58.452777-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-9b7.4","depends_on_id":"thrum-9b7","type":"parent-child","created_at":"2026-02-24T16:15:40.113362-08:00","created_by":"Leon Letto"},{"issue_id":"thrum-9b7.4","depends_on_id":"thrum-9b7.1","type":"blocks","created_at":"2026-02-24T16:15:47.324864-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-kh3","title":"UI Structural Fixes — Daemon port, hash routing, polling, hooks","description":"Re-implement: (B1) DaemonRestart port preservation via THRUM_WS_PORT env var, (B2) URL hash routing for navigation persistence in uiStore, (B3) refetchInterval:5000 polling for useMessageList, (B4) refetchInterval:30000 for useSessionList, (D1) MessageList hooks ordering fix + auto-scroll, (D2) Remove useBrowserNotifications from DashboardPage. See dev-docs/failure-recovery/RECOVERY_PLAN.md Groups B + D1 + D2.","status":"closed","priority":1,"issue_type":"epic","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:19:35.828776-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T10:35:34.646143-08:00","closed_at":"2026-02-24T10:35:34.646143-08:00","close_reason":"UI structural fixes complete","dependencies":[{"issue_id":"thrum-kh3","depends_on_id":"thrum-7fg","type":"blocks","created_at":"2026-02-24T08:20:03.902646-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-kh3.1","title":"DaemonRestart port preservation via THRUM_WS_PORT env var","description":"## Files\n- Modify: internal/cli/daemon.go\n\n## Steps\nIn DaemonRestart(), add code to:\n1. Read prevPort := ReadWebSocketPort(repoPath) BEFORE calling DaemonStop\n2. After DaemonStop and sleep, if prevPort \u003e 0: os.Setenv(\"THRUM_WS_PORT\", fmt.Sprintf(\"%d\", prevPort)) with defer os.Unsetenv\n3. Verify os and fmt are already imported\n\n## Acceptance Criteria\n- [ ] go build ./cmd/thrum/ compiles\n- [ ] Port preserved across thrum daemon restart","status":"closed","priority":1,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:21:49.444362-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T10:29:58.34686-08:00","closed_at":"2026-02-24T10:29:58.34686-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-kh3.1","depends_on_id":"thrum-kh3","type":"parent-child","created_at":"2026-02-24T08:21:49.445078-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-kh3.2","title":"URL hash routing for navigation persistence in uiStore","description":"## Files\n- Modify: ui/packages/shared-logic/src/stores/uiStore.ts\n\n## Steps\n1. Add validViews array with all View type values\n2. Add stateFromHash() that parses window.location.hash (URLSearchParams on hash after #) into UIState\n3. Add stateToHash() that writes UIState to URL hash via window.history.replaceState (no history spam)\n4. Change initialState to merge defaults with stateFromHash() restored values\n5. Add uiStore.subscribe() that calls stateToHash on every state change\n6. Call stateToHash(initialState) once at startup\n\nHash format: #view=live-feed\u0026agent=xyz\u0026group=abc\n\n## Acceptance Criteria\n- [ ] Refreshing page returns to current view\n- [ ] URL updates when navigating between views\n- [ ] Tests pass","status":"closed","priority":1,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:21:56.432941-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T10:29:58.348464-08:00","closed_at":"2026-02-24T10:29:58.348464-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-kh3.2","depends_on_id":"thrum-kh3","type":"parent-child","created_at":"2026-02-24T08:21:56.433663-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-kh3.3","title":"Add polling fallbacks for useMessageList and useSessionList","description":"## Files\n- Modify: ui/packages/shared-logic/src/hooks/useMessage.ts\n- Modify: ui/packages/shared-logic/src/hooks/useSession.ts\n\n## Steps\n1. In useMessageList: add refetchInterval: 5000 after existing staleTime: 1000\n2. In useSessionList: add refetchInterval: 30000 after existing staleTime: 30000\n\nBrowser clients don't have WebSocket push subscriptions (requires agent session), so polling is the primary refresh mechanism.\n\n## Acceptance Criteria\n- [ ] Messages appear within 5s of being sent (without page refresh)\n- [ ] Tests pass","status":"closed","priority":1,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:22:01.563442-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T10:29:58.349529-08:00","closed_at":"2026-02-24T10:29:58.349529-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-kh3.3","depends_on_id":"thrum-kh3","type":"parent-child","created_at":"2026-02-24T08:22:01.564163-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-kh3.4","title":"Fix MessageList hooks ordering + auto-scroll to bottom","description":"## Files\n- Modify: ui/packages/web-app/src/components/inbox/MessageList.tsx\n\n## Steps\n1. Move scrollEndRef (useRef), prevMessageCountRef (useRef), useLayoutEffect (scroll to bottom on initial render), and useEffect (scroll to bottom when messages.length increases) ABOVE the early returns (loading/empty states)\n2. Add conversations = groupByConversation(messages).slice().reverse() so newest appear at bottom\n3. Add \u003cdiv ref={scrollEndRef} /\u003e at the end of the scroll area\n\nThis fixes React error #310 (Rendered more hooks than during the previous render).\n\n## Acceptance Criteria\n- [ ] No React error #310 on My Inbox or agent inbox views\n- [ ] Messages appear newest at bottom\n- [ ] Auto-scrolls to bottom on load and when new messages arrive\n- [ ] Tests pass","status":"closed","priority":1,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:22:11.370771-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T10:29:58.350513-08:00","closed_at":"2026-02-24T10:29:58.350513-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-kh3.4","depends_on_id":"thrum-kh3","type":"parent-child","created_at":"2026-02-24T08:22:11.371507-08:00","created_by":"Leon Letto"}]}
{"id":"thrum-kh3.5","title":"Remove useBrowserNotifications from DashboardPage","description":"## Files\n- Modify: ui/packages/web-app/src/pages/DashboardPage.tsx\n- Modify: ui/packages/web-app/src/pages/__tests__/DashboardPage.test.tsx\n\n## Steps\n1. Remove useBrowserNotifications call from DashboardPage\n2. Remove useCurrentUser import from DashboardPage (no longer needed for notifications)\n3. Keep useCurrentUser in the test mock (child components still use it)\n\n## Acceptance Criteria\n- [ ] No browser notification permission prompt on page load\n- [ ] Tests pass (DashboardPage.test.tsx)","status":"closed","priority":1,"issue_type":"task","owner":"leon.letto@gmail.com","created_at":"2026-02-24T08:22:15.565756-08:00","created_by":"Leon Letto","updated_at":"2026-02-24T10:29:58.351614-08:00","closed_at":"2026-02-24T10:29:58.351614-08:00","close_reason":"Closed","dependencies":[{"issue_id":"thrum-kh3.5","depends_on_id":"thrum-kh3","type":"parent-child","created_at":"2026-02-24T08:22:15.566436-08:00","created_by":"Leon Letto"}]}
