{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:15:12Z","event_type":"created","id":1,"issue_id":"thrum-1xz","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:15:16Z","event_type":"created","id":2,"issue_id":"thrum-n0u","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:15:17Z","event_type":"created","id":3,"issue_id":"thrum-ynl","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:17:04Z","event_type":"created","id":4,"issue_id":"thrum-lk1","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:17:07Z","event_type":"created","id":5,"issue_id":"thrum-z41","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:17:09Z","event_type":"created","id":6,"issue_id":"thrum-16m","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:17:22Z","event_type":"created","id":7,"issue_id":"thrum-4zr","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:17:26Z","event_type":"created","id":8,"issue_id":"thrum-0ga","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:17:26Z","event_type":"created","id":9,"issue_id":"thrum-1mk","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:17:41Z","event_type":"created","id":10,"issue_id":"thrum-chr","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:17:44Z","event_type":"created","id":11,"issue_id":"thrum-4av","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:17:47Z","event_type":"created","id":12,"issue_id":"thrum-lru","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:18:00Z","event_type":"created","id":13,"issue_id":"thrum-qd9","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:18:05Z","event_type":"created","id":14,"issue_id":"thrum-85u","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:18:21Z","event_type":"created","id":15,"issue_id":"thrum-gln","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:24:39Z","event_type":"updated","id":16,"issue_id":"thrum-chr","new_value":"{\"description\":\"## Files\\n\\n- Modify: `internal/backup/backup.go` (add post_backup command execution after all backups)\\n- Modify: `internal/config/daemon.go` (add PostBackup string field to BackupConfig)\\n- Create: `internal/backup/post_hook.go` (post-backup command runner)\\n- Create: `internal/backup/post_hook_test.go`\\n\\n## Steps\\n\\n### Step 1: Add PostBackup to config\\nAdd `PostBackup string` field to BackupConfig in daemon.go.\\n\\n### Step 2: Implement post-backup hook runner\\n```go\\nfunc RunPostBackup(command, repoPath, backupDir, repoName, currentDir string) error\\n```\\n- Run command via `sh -c` with CWD=repoPath\\n- Set environment variables:\\n  - THRUM_BACKUP_DIR = backupDir\\n  - THRUM_BACKUP_REPO = repoName\\n  - THRUM_BACKUP_CURRENT = currentDir path\\n- 60s timeout\\n- Non-fatal: warn on failure, don't fail the backup\\n\\n### Step 3: Wire into RunBackup orchestrator\\nCall RunPostBackup as the final step after rotation completes.\\n\\n### Step 4: Add CLI support\\n`thrum backup config set post-backup 'bash dev-docs/dev-scripts/sync-dev-docs.sh'`\\n\\n### Step 5: Verify\\n```bash\\ngo test ./internal/backup/... -run TestPostBackup -v -race\\n```\\n\\n## Acceptance Criteria\\n- [ ] post_backup command runs after all backups complete\\n- [ ] Environment variables set correctly\\n- [ ] Failure is non-fatal (warns, backup still succeeds)\\n- [ ] 60s timeout enforced\\n- [ ] Tests pass with race detector\",\"title\":\"Implement post-backup hook execution\"}","old_value":"{\"id\":\"thrum-chr\",\"title\":\"Update sync-dev-docs.sh for thrum backup\",\"description\":\"## Files\\n\\n- Modify: `dev-docs/dev-scripts/sync-dev-docs.sh` (replace manual beads backup with thrum backup)\\n\\n## Steps\\n\\n### Step 1: Configure thrum backup with beads plugin\\n```bash\\nthrum backup plugin add --preset beads\\n```\\n\\n### Step 2: Update sync script\\nReplace the manual beads backup section with a single thrum backup call:\\n```bash\\n# Refresh thrum + beads backup before syncing\\necho 'Running thrum backup...'\\n(cd \\\"$THRUM\\\" \\u0026\\u0026 thrum backup --dir \\\"$THRUM/dev-docs/backup\\\" 2\\u003e\\u00261) || echo 'Backup warning (non-fatal)'\\necho 'Backup complete.'\\n```\\n\\nThis produces:\\n- dev-docs/backup/thrum/current/ (thrum data + beads plugin data)\\n- dev-docs/backup/thrum/archives/ (rotated zips)\\n\\n### Step 3: Test the full flow\\n```bash\\nbash dev-docs/dev-scripts/sync-dev-docs.sh\\nls dev-docs/backup/thrum/current/\\n```\\n\\n## Acceptance Criteria\\n- [ ] sync-dev-docs.sh uses thrum backup instead of manual bd backup\\n- [ ] Beads data included via plugin system\\n- [ ] Backup dir uses repo name subfolder (thrum/)\\n- [ ] Script still syncs to thrumdev repo correctly\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"leon.letto@gmail.com\",\"created_at\":\"2026-02-27T21:17:42Z\",\"created_by\":\"Leon Letto\",\"updated_at\":\"2026-02-27T21:17:42Z\"}"}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:48:55Z","event_type":"created","id":17,"issue_id":"thrum-7iv","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:49:27Z","event_type":"created","id":18,"issue_id":"thrum-7iv.1","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:49:28Z","event_type":"created","id":19,"issue_id":"thrum-7iv.2","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T13:49:28Z","event_type":"created","id":20,"issue_id":"thrum-7iv.3","new_value":"","old_value":""}
{"actor":"Leon Letto","comment":null,"created_at":"2026-02-27T14:14:50Z","event_type":"status_changed","id":21,"issue_id":"thrum-7iv.1","new_value":"{\"status\":\"in_progress\"}","old_value":"{\"id\":\"thrum-7iv.1\",\"title\":\"Allow hyphens in agent name regex\",\"description\":\"## Files\\n\\n- Modify: `internal/identity/identity.go` (regex, ValidateAgentName, doc comment)\\n- Test: `internal/identity/identity_test.go`\\n\\n## Steps\\n\\n### Step 1: Write failing tests\\n\\nAdd test cases to identity_test.go for ValidateAgentName:\\n- `\\\"alice-agent\\\"` → should pass (currently fails)\\n- `\\\"impl-backup-restore\\\"` → should pass\\n- `\\\"a-b-c\\\"` → should pass\\n- `\\\"-leading\\\"` → should still fail (starts with hyphen)\\n- `\\\"trailing-\\\"` → should still fail (ends with hyphen)\\n\\n### Step 2: Update regex and error message\\n\\nIn `internal/identity/identity.go`:\\n- Line 24: Change `agentNameRegex` from `^[a-z0-9_]+$` to `^[a-z0-9][a-z0-9_-]*[a-z0-9]$|^[a-z0-9]$`\\n  (allows hyphens in middle, requires alphanumeric start/end, single char OK)\\n- Line 224: Update error message to mention hyphens\\n- Lines 202-208: Update doc comment to list hyphens as allowed\\n\\n### Step 3: Verify\\n\\n```bash\\ngo test ./internal/identity/... -run TestValidateAgentName -v -race\\n```\\n\\n## Acceptance Criteria\\n\\n- [ ] Names with hyphens like `alice-agent` pass validation\\n- [ ] Leading/trailing hyphens rejected\\n- [ ] Existing valid names still pass\\n- [ ] Existing invalid names still fail (uppercase, dots, spaces)\\n- [ ] `isBase32Hash` unaffected (hyphens not in Crockford alphabet)\\n- [ ] Consistent with `safeIdentifierRE` in `internal/cli/runtime_init.go`\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"leon.letto@gmail.com\",\"created_at\":\"2026-02-27T21:49:28Z\",\"created_by\":\"Leon Letto\",\"updated_at\":\"2026-02-27T21:49:28Z\"}"}
