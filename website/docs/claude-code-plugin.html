<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Claude Code Plugin — Thrum</title>
  <meta name="description" content="Install and use the Thrum plugin for Claude Code — slash commands, automatic context injection, and multi-agent coordination without manual configuration">
  <!-- Open Graph -->
  <meta property="og:type" content="article">
  <meta property="og:title" content="Claude Code Plugin — Thrum">
  <meta property="og:description" content="Install and use the Thrum plugin for Claude Code — slash commands, automatic context injection, and multi-agent coordination without manual configuration">
  <meta property="og:url" content="https://leonletto.github.io/thrum/docs/claude-code-plugin.html">
  <meta property="og:site_name" content="Thrum">
  <meta property="og:image" content="https://leonletto.github.io/thrum/img/social-card.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Claude Code Plugin — Thrum">
  <meta name="twitter:description" content="Install and use the Thrum plugin for Claude Code — slash commands, automatic context injection, and multi-agent coordination without manual configuration">
  <meta name="twitter:image" content="https://leonletto.github.io/thrum/img/social-card.png">
  <!-- Canonical: SPA is the primary URL -->
  <link rel="canonical" href="https://leonletto.github.io/thrum/docs.html#claude-code-plugin.html">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#x26A1;</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/theme.css">
  <link rel="stylesheet" href="../css/docs.css">
  <script>
    (function(){var t=localStorage.getItem('thrum-theme');if(t){document.documentElement.setAttribute('data-theme',t)}else if(window.matchMedia&&window.matchMedia('(prefers-color-scheme:light)').matches){document.documentElement.setAttribute('data-theme','light')}else{document.documentElement.setAttribute('data-theme','dark')}})();
  </script>
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <nav class="header-nav">
        <a href="../index.html" class="logo">
          <span class="logo-glyph">&gt;_</span>
          <span class="logo-text">thrum</span>
        </a>
        <div class="nav-links">
          <a href="../index.html" class="nav-link">Home</a>
          <a href="../docs.html" class="nav-link nav-link-active">Docs</a>
          <a href="../about.html" class="nav-link">About</a>
          <a href="https://github.com/leonletto/thrum" class="nav-link nav-link-external" target="_blank" rel="noopener">GitHub</a>
        </div>
      </nav>
    </div>
  </header>
  <main class="docs-content" style="max-width:48rem;margin:2rem auto;padding:0 1.5rem">
    <div class="docs-content-inner">
<h2>Claude Code Plugin</h2>
<blockquote>
<p>See also: <a href="quickstart.html">Quickstart Guide</a> for basic Thrum setup,<br><a href="agent-configs.html">Agent Configurations</a> for manual agent definitions,<br><a href="mcp-server.html">MCP Server</a> for the native MCP transport,<br><a href="multi-agent.html">Multi-Agent Support</a> for coordination patterns.</p>
</blockquote>
<h2>Overview</h2>
<p>The Thrum plugin for Claude Code gives agents native access to Thrum messaging<br>through slash commands, automatic context injection via hooks, and progressive<br>disclosure resource docs. It replaces the manual agent definition approach<br>(copying <code>.md</code> files into <code>.claude/agents/</code>) with a single plugin install.</p>
<p><strong>What you get:</strong></p>
<ul>
<li><strong>10 slash commands</strong> — <code>/thrum:send</code>, <code>/thrum:inbox</code>, <code>/thrum:quickstart</code>,<br>and more</li>
<li><strong>Automatic context</strong> — SessionStart and PreCompact hooks run <code>thrum prime</code> to<br>inject identity, team roster, inbox, and git state</li>
<li><strong>8 resource docs</strong> — Progressive disclosure for messaging patterns, groups,<br>identity, worktrees, and anti-patterns</li>
<li><strong>Background listener</strong> — Sub-agent template for async message monitoring</li>
</ul>
<h2>Prerequisites</h2>
<p>Before installing the plugin, you need Thrum installed and initialized:</p>
<pre><code class="language-bash hljs"><span class="hljs-comment"># Install thrum (Go 1.26+)</span>
go install github.com/leonletto/thrum@latest

<span class="hljs-comment"># Or build from source</span>
git <span class="hljs-built_in">clone</span> https://github.com/leonletto/thrum.git
<span class="hljs-built_in">cd</span> thrum &amp;&amp; make install

<span class="hljs-comment"># Initialize in your repository (v0.4.5+: init does full setup)</span>
<span class="hljs-built_in">cd</span> /path/to/your/repo
thrum init
```text

`thrum init` (v0.4.5+) handles the full setup: prompts <span class="hljs-keyword">for</span> runtime detection,
generates CLAUDE.md coordination instructions, starts the daemon, registers your
agent, and starts a session. For manual control, you can still run individual
steps:

```bash
thrum setup claude-md --apply    <span class="hljs-comment"># Generate CLAUDE.md coordination instructions</span>
thrum daemon start               <span class="hljs-comment"># Start the daemon separately</span>
```text

Verify the daemon is running:

```bash
thrum daemon status
```text

<span class="hljs-comment">## Installation</span>

<span class="hljs-comment">### From GitHub (self-hosted marketplace)</span>

The plugin is distributed as a self-hosted marketplace. First add the
marketplace, <span class="hljs-keyword">then</span> install the plugin:

```bash
<span class="hljs-comment"># Add the Thrum marketplace</span>
claude plugin marketplace add https://github.com/leonletto/thrum

<span class="hljs-comment"># Install the plugin</span>
claude plugin install thrum
```text

<span class="hljs-comment">### From local clone</span>

If you<span class="hljs-string">&#x27;ve cloned the Thrum repository locally:

```bash
# Add as a local marketplace
claude plugin marketplace add /path/to/thrum

# Install the plugin
claude plugin install thrum
```text

### Verify installation

Start a new Claude Code session. The SessionStart hook should automatically run
`thrum prime` and inject context. You&#x27;</span>ll see your agent identity, team roster,
and unread messages <span class="hljs-keyword">in</span> the session preamble.

<span class="hljs-comment">## Slash Commands</span>

All commands live under the `/thrum:` namespace.

| Command                 | Purpose                                                      |
| ----------------------- | ------------------------------------------------------------ |
| `/thrum:quickstart`     | Register agent and start session (interactive or with flags) |
| `/thrum:send`           | Send direct, group, or broadcast messages                    |
| `/thrum:inbox`          | Check message inbox (all or unread only)                     |
| `/thrum:reply`          | Reply to a message (inherits original audience)              |
| `/thrum:<span class="hljs-built_in">wait</span>`           | Block <span class="hljs-keyword">until</span> a message arrives (background listener use)      |
| `/thrum:team`           | Show active team members with roles and intents              |
| `/thrum:group`          | Create, manage, and message agent <span class="hljs-built_in">groups</span>                     |
| `/thrum:overview`       | Combined status + team + inbox view                          |
| `/thrum:prime`          | Load full session context (identity, team, inbox, git)       |
| `/thrum:update-context` | Guided workflow to save session narrative + state            |

<span class="hljs-comment">### Common workflows</span>

**Start a session:**

```text
/thrum:quickstart
```text

Prompts <span class="hljs-keyword">for</span> role, module, and intent — or pass flags directly:

```bash
thrum quickstart --role implementer --module auth --intent <span class="hljs-string">&quot;Building login flow&quot;</span>
```text

**Send a message:**

```text
/thrum:send
```text

Guided prompt <span class="hljs-keyword">for</span> recipient and message. Direct usage:

```bash
thrum send <span class="hljs-string">&quot;Starting auth work&quot;</span> --to @coordinator
thrum send <span class="hljs-string">&quot;Need review&quot;</span> --to @reviewers
thrum send <span class="hljs-string">&quot;Heads up: breaking change&quot;</span> --to @everyone
```text

**Check inbox and reply:**

```text
/thrum:inbox
/thrum:reply
```go

<span class="hljs-comment">## Hooks</span>

The plugin configures two hooks that run automatically:

<span class="hljs-comment">### SessionStart</span>

Runs `thrum prime` when a Claude Code session begins. Injects:

- Agent identity (name, role, module)
- Active team members and their intents
- Unread messages
- Git branch and status
- Daemon health

If Thrum isn<span class="hljs-string">&#x27;t initialized, shows a friendly setup message instead of failing.

### PreCompact

Runs `thrum prime` before context compaction. This ensures agent identity and
session state survive compaction — the agent can continue working without losing
track of who it is or what messages are pending.

## Resource Docs

The plugin includes 8 resource documents that Claude loads on demand for deeper
guidance:

| Resource              | When it&#x27;</span>s used                                            |
| --------------------- | --------------------------------------------------------- |
| `MESSAGING.md`        | Message lifecycle, addressing patterns                    |
| `GROUPS.md`           | Creating <span class="hljs-built_in">groups</span>, adding members, group messaging          |
| `IDENTITY.md`         | Agent naming, registration, multi-worktree identity       |
| `WORKTREES.md`        | Cross-worktree coordination, shared daemon, file tracking |
| `LISTENER_PATTERN.md` | Background message listener sub-agent template            |
| `BOUNDARIES.md`       | When to use Thrum vs TaskList/SendMessage                 |
| `ANTI_PATTERNS.md`    | 12 common mistakes and how to avoid them                  |
| `CLI_REFERENCE.md`    | Complete <span class="hljs-built_in">command</span> syntax <span class="hljs-keyword">for</span> all `thrum` commands          |

<span class="hljs-comment">## MCP Server Integration</span>

For native tool-call integration (no shell-outs), configure the Thrum MCP server
<span class="hljs-keyword">in</span> your project<span class="hljs-string">&#x27;s `.claude/settings.json`:

```json
{
  &quot;mcpServers&quot;: {
    &quot;thrum&quot;: {
      &quot;type&quot;: &quot;stdio&quot;,
      &quot;command&quot;: &quot;thrum&quot;,
      &quot;args&quot;: [&quot;mcp&quot;, &quot;serve&quot;]
    }
  }
}
```text

This provides 11 MCP tools: 5 for core messaging (`send_message`,
`check_messages`, `wait_for_message`, `list_agents`, `broadcast_message`) and 6
for group management (`create_group`, `delete_group`, `add_group_member`,
`remove_group_member`, `list_groups`, `get_group`). See
[MCP Server](mcp-server.md) for the full API.

**Plugin vs MCP:** The plugin&#x27;</span>s slash commands use the CLI (`Bash(thrum:*)`).
The MCP server provides native tool calls. Both work — the plugin is simpler to
<span class="hljs-built_in">set</span> up, the MCP server is more efficient <span class="hljs-keyword">for</span> high-frequency messaging. You can
use both together.

<span class="hljs-comment">## Background Listener</span>

When `thrum prime` runs <span class="hljs-keyword">in</span> a Claude Code session and detects an active identity,
it outputs a ready-to-use listener spawn instruction with the correct repo path.
Copy and run it to start background message monitoring:

```text
Task(
  subagent_type=<span class="hljs-string">&quot;message-listener&quot;</span>,
  model=<span class="hljs-string">&quot;haiku&quot;</span>,
  run_in_background=<span class="hljs-literal">true</span>,
  prompt=<span class="hljs-string">&quot;Listen for Thrum messages.
    WAIT_CMD=cd /path/to/repo &amp;&amp; thrum wait --timeout 15m --after -30s --json&quot;</span>
)
```text

The listener runs 6 cycles of 15 minutes each (~90 min coverage), blocks on
`thrum <span class="hljs-built_in">wait</span>` (no polling), returns when messages arrive, and costs
~<span class="hljs-variable">$0</span>.00003/cycle on Haiku. Re-arm after processing each batch. See the
`LISTENER_PATTERN.md` resource <span class="hljs-keyword">for</span> the full template.

<span class="hljs-comment">## Plugin vs Manual Agent Definitions</span>

| Feature        | Plugin                                      | Manual (toolkit/agents/)              |
| -------------- | ------------------------------------------- | ------------------------------------- |
| Installation   | `claude plugin marketplace add` + `install` | Copy `.md` files to `.claude/agents/` |
| Updates        | Re-install from <span class="hljs-built_in">source</span>                      | Manual file replacement               |
| Slash commands | 10 commands included                        | None                                  |
| Hooks          | SessionStart + PreCompact                   | Manual hook configuration             |
| Resource docs  | 8 progressive disclosure docs               | Single monolithic agent file          |
| Maintenance    | Versioned (v0.4.5)                          | Ad-hoc                                |

The manual agent definitions (`thrum-agent.md`, `message-listener.md`) still
work and are available <span class="hljs-keyword">in</span> `toolkit/agents/` <span class="hljs-keyword">for</span> environments that don<span class="hljs-string">&#x27;t support
plugins.

## Troubleshooting

**&quot;Thrum not initialized&quot; on session start**

Run `thrum init &amp;&amp; thrum daemon start` in your repository root.

**No context injected after plugin install**

Verify the plugin is loaded: check that `/thrum:prime` is available as a slash
command. If not, reinstall the plugin.

**Messages not arriving**

Check daemon status with `thrum daemon status`. The daemon must be running for
messaging to work. Start it with `thrum daemon start`.

**Identity conflicts in multi-worktree setups**

Set `THRUM_NAME` environment variable to give each worktree a unique agent name.
See [Identity System](identity.md) for details.</span></code></pre>

    </div>
    <p style="margin-top:2rem"><a href="../docs.html#claude-code-plugin.html">&larr; View in documentation</a></p>
  </main>
  <script>
    // Redirect browsers to the SPA for full navigation experience.
    // Crawlers (which don't execute JS) will index the static content above.
    if (window.location.search.indexOf('nospa') === -1) {
      window.location.replace('../docs.html#claude-code-plugin.html');
    }
  </script>
</body>
</html>